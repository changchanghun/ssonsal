<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ì¡°ê±´ ì„¤ì •</title>
    <link rel="stylesheet" href="/css/app.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
<div class="topbar">
    <a class="back" href="/">â†</a>
    <h1>ì¡°ê±´ ì„¤ì •</h1>
</div>
<div class="container center">
    <h2 class="title-lg">ì˜¤ëŠ˜ ì»¨ë””ì…˜ì€?</h2>
    <p class="muted">í˜„ì¬ ì´ë™ìƒí™©ì„ ì„ íƒí•´ì£¼ì„¸ìš”</p>
    <div class="selector">
        <button data-level="BAD">ğŸ˜µâ€ğŸ’« ìµœì•…</button>
        <button data-level="NORMAL">ğŸ™‚ ë³´í†µ</button>
        <button data-level="GOOD">ğŸ˜Œ ìµœìƒ</button>
    </div>
</div>
</body>
</html>
<script>
    // ì»¨ë””ì…˜ ì„ íƒ
    $(".selector button").on("click", function(){
        $(".selector button").removeClass("active");
        $(this).addClass("active");
        let condition = $(this).data("level");

        $.ajax({
            url: "/api/session",
            type: "POST",
            contentType: "application/json",
            data: JSON.stringify({
                status: condition
            }),
            success: function (response) {
                let sessionId = response.id;
                localStorage.setItem("sessionId", sessionId);
                localStorage.setItem("condition", condition);
                location.href = `/trip?condition=${condition}`;
            },
            error: function (xhr, status, error) {
                alert("ì˜¤ë¥˜: " + xhr.responseText);
                return false;
            }
        });
    })

</script>